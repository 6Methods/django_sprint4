# Blogicum

Это мой проект блога на Django, разработанный в рамках обучения в Яндекс Практикуме. Здесь реализован полнофункциональный блог с возможностью публикации постов, комментирования и управления профилем.

## Что умеет делать проект

Регистрация и аутентификация пользователей со всеми необходимыми страницами (вход, выход, восстановление пароля).

Публикации можно создавать, редактировать и удалять. К каждому посту можно прикрепить изображение. Есть возможность создавать отложенные публикации с датой в будущем.

Комментарии к постам могут оставлять только зарегистрированные пользователи. Каждый может редактировать и удалять свои комментарии.

Профили пользователей показывают информацию о человеке и все его публикации. Можно редактировать свой профиль и менять пароль.

Посты группируются по категориям и местоположениям. На всех страницах со списками работает пагинация по 10 постов.

Реализованы кастомные страницы для ошибок 403, 404 и 500.

## Технологии

В проекте использованы Python и Django 3.2.16. Для стилей подключен Bootstrap 5 через django-bootstrap5. База данных SQLite, для работы с изображениями установлен Pillow. Тестирование проводится через pytest с плагином pytest-django.

## Как запустить проект

Сначала нужно клонировать репозиторий и перейти в него:

```bash
git clone <адрес-репозитория>
cd django_sprint4
```

Создать виртуальное окружение:

```bash
python -m venv venv
```

Активировать его. На Windows:

```bash
venv\Scripts\activate
```

На Linux или Mac:

```bash
source venv/bin/activate
```

Установить зависимости:

```bash
pip install -r requirements.txt
```

Применить миграции:

```bash
python manage.py migrate
```

Создать суперпользователя для доступа к админке:

```bash
python manage.py createsuperuser
```

Запустить сервер:

```bash
python manage.py runserver
```

После этого проект будет доступен по адресу http://127.0.0.1:8000/

## Тестовые данные

Если хочется сразу увидеть проект с данными, можно загрузить фикстуры:

```bash
python manage.py loaddata db.json
```

## Тестирование

Запустить все тесты:

```bash
pytest
```

Запустить с подробным выводом:

```bash
pytest -v
```

## Структура

В проекте два основных приложения: blog и pages.

В приложении blog находятся модели для постов, категорий, местоположений и комментариев. Там же реализованы все views, формы и URL-маршруты для работы с блогом.

Приложение pages содержит статические страницы (О проекте, Правила) и обработчики ошибок.

Папка blogicum содержит настройки проекта и главный urls.py.

Все шаблоны лежат в templates, разделенные по приложениям. В папке includes находятся переиспользуемые части шаблонов.

Статические файлы (изображения, стили) хранятся в static. Загружаемые пользователями файлы попадают в media.

Папка sent_emails используется для сохранения email при разработке вместо реальной отправки.

## Основные URL

Главная страница: /

Создание поста: /posts/create/

Просмотр поста: /posts/<id>/

Редактирование поста: /posts/<id>/edit/

Удаление поста: /posts/<id>/delete/

Добавление комментария: /posts/<id>/comment/

Редактирование комментария: /posts/<id>/edit_comment/<comment_id>/

Удаление комментария: /posts/<id>/delete_comment/<comment_id>/

Посты категории: /category/<slug>/

Профиль пользователя: /profile/<username>/

Редактирование профиля: /edit_profile/

Регистрация: /auth/registration/

Вход: /auth/login/

Выход: /auth/logout/

Админ-панель: /admin/

Страницы смены и восстановления пароля доступны по стандартным путям Django.

## Особенности реализации

Автор поста видит все свои публикации, включая неопубликованные и отложенные. Остальные пользователи видят только опубликованные посты с датой публикации не позже текущей.

Для оптимизации запросов к базе используется select_related для связанных объектов и annotate для подсчета комментариев.

Views реализованы с использованием class-based views Django: ListView для списков, DetailView для отдельных объектов, CreateView, UpdateView и DeleteView для создания, редактирования и удаления.

Для защиты views используется LoginRequiredMixin, а проверка авторства выполняется в методе dispatch.

Комментарии отсортированы от старых к новым, чтобы читать их было удобнее.

## Админка

В админ-панели можно управлять всеми публикациями, категориями, местоположениями и комментариями. Для постов настроена фильтрация по статусу публикации, категориям и авторам. Некоторые поля можно редактировать прямо в списке.

## Безопасность

Все формы защищены от CSRF-атак. Для создания и редактирования контента требуется авторизация. При попытке редактировать чужой пост пользователь перенаправляется на страницу просмотра.

## Автор

Проект выполнен в рамках обучения на курсе Python-разработчик в Яндекс Практикуме.
